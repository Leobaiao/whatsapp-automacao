import subprocess
#adb shell pm list packages
apps_manter = [
	"com.companyname.APP_ALTWEB_ENVIA_WB",
    "com.google.android.networkstack.tethering",
    "com.whatsapp.w4b",
    "com.sec.android.app.DataCreate",
    "com.android.cts.priv.ctsshim",
    "com.samsung.android.smartswitchassistant",
    "com.sec.vsim.ericssonnsds.webapp",
    "com.sec.android.app.setupwizardlegalprovider",
    "com.samsung.android.app.galaxyfinder",
    "com.samsung.android.themestore",
    "com.sec.android.app.chromecustomizations",
    "com.samsung.android.app.cocktailbarservice",
    "com.android.internal.display.cutout.emulation.corner",
    "com.samsung.android.wifi.resources.wpa2",
    "com.google.android.ext.services",
    "com.android.internal.display.cutout.emulation.double",
    "com.sec.location.nfwlocationprivacy",
    "com.android.providers.telephony",
    "com.sec.android.app.parser",
    "com.android.dynsystem",
    "io.appium.settings",
    "com.samsung.android.networkstack",
    "com.google.android.googlequicksearchbox",
    "com.google.android.cellbroadcastservice",
    "com.android.providers.calendar",
    "com.osp.app.signin",
    "com.samsung.clipboardsaveservice",
    "com.sec.automation",
    "com.android.providers.media",
    "com.google.android.onetimeinitializer",
    "com.google.android.ext.shared",
    "com.android.internal.systemui.navbar.gestural_wide_back",
    "com.android.wallpapercropper",
    "com.samsung.android.wallpaper.res",
    "com.samsung.android.mapsagent",
    "com.sec.android.app.safetyassurance",
    "com.samsung.android.incallui",
    "com.samsung.android.kidsinstaller",
    "com.samsung.phone.overlay.common",
    "com.sec.usbsettings",
    "com.samsung.android.easysetup",
    "com.android.externalstorage",
    "com.samsung.android.aware.service",
    "com.android.htmlviewer",
    "com.whatsapp",
    "com.android.companiondevicemanager",
    "com.android.mms.service",
    "com.samsung.android.rubin.app",
    "com.qualcomm.qti.qms.service.connectionsecurity",
    "com.android.providers.downloads",
    "com.sec.android.easyMover.Agent",
    "com.google.android.networkstack.tethering.overlay",
    "com.samsung.android.mdx.quickboard",
    "com.android.internal.systemui.onehanded.gestural",
    "vendor.qti.hardware.cacert.server",
    "com.wsomacp",
    "com.samsung.faceservice",
    "com.monotype.android.font.foundation",
    "com.sec.android.app.factorykeystring",
    "com.sec.android.emergencymode.service",
    "vendor.qti.iwlan",
    "com.google.android.configupdater",
    "com.samsung.android.accessibility.talkback",
    "com.google.android.providers.media.module",
    "com.google.android.overlay.modules.permissioncontroller",
    "com.sec.android.app.billing",
    "io.appium.uiautomator2.server",
    "com.sec.epdgtestapp",
    "com.samsung.android.wifi.p2paware.resources",
    "com.sec.android.daemonapp",
    "com.sec.sve",
    "com.android.providers.downloads.ui",
    "com.android.vending",
    "com.android.pacprocessor",
    "com.android.simappdialog",
    "com.samsung.android.secsoundpicker",
    "com.samsung.internal.systemui.navbar.sec_gestural",
    "com.android.internal.display.cutout.emulation.hole",
    "com.android.internal.display.cutout.emulation.tall",
    "com.sec.android.app.soundalive",
    "com.sec.android.provider.badge",
    "com.android.certinstaller",
    "com.android.carrierconfig",
    "com.android.internal.systemui.navbar.threebutton",
    "com.samsung.SMT",
    "com.samsung.cmh",
    "com.samsung.rcs",
    "android",
    "com.samsung.android.wcmurlsnetworkstack",
    "com.samsung.android.sm.devicesecurity",
    "com.google.android.overlay.modules.cellbroadcastreceiver",
    "com.samsung.internal.systemui.navbar.sec_gestural_no_hint",
    "com.android.egg",
    "com.android.mtp",
    "com.android.ons",
    "com.android.stk",
    "com.samsung.android.messaging",
    "com.android.backupconfirm",
    "com.samsung.klmsagent",
    "com.sec.android.app.SecSetupWizard",
    "com.samsung.android.app.telephonyui",
    "com.samsung.android.wifi.softap.resources",
    "com.google.android.overlay.gmsconfig.common",
    "com.android.settings.intelligence",
    "com.sec.bcservice",
    "com.sec.modem.settings",
    "com.monotype.android.font.samsungone",
    "com.android.internal.systemui.navbar.gestural_extra_wide_back",
    "com.samsung.android.privacydashboard",
    "com.google.android.permissioncontroller",
    "com.val.hardware",
    "com.sec.android.app.servicemodeapp",
    "com.qualcomm.qti.dynamicddsservice",
    "com.google.android.setupwizard",
    "com.sec.android.usermanual",
    "com.sec.android.gallery3d",
    "com.android.providers.settings",
    "com.samsung.accessibility",
    "com.sec.imsservice",
    "com.android.sharedstoragebackup",
    "com.facebook.services",
    "com.samsung.android.mobileservice",
    "com.android.printspooler",
    "com.samsung.android.mdx.kit",
    "com.samsung.storyservice",
    "com.android.dreams.basic",
    "com.google.android.overlay.modules.ext.services",
    "com.android.se",
    "com.android.inputdevices",
    "com.samsung.android.wifi.resources",
    "com.google.android.overlay.gmsconfig.photos",
    "com.samsung.android.kgclient",
    "com.android.bips",
    "com.android.stk2",
    "com.samsung.android.app.contacts",
    "com.samsung.android.service.peoplestripe",
    "com.samsung.android.da.daagent",
    "com.google.android.captiveportallogin",
    "com.google.android.overlay.gmsconfig.geotz",
    "com.samsung.android.smartcallprovider",
    "com.google.android.modulemetadata",
    "com.samsung.android.app.taskedge",
    "com.samsung.android.dynamiclock",
    "com.samsung.advp.imssettings",
    "com.samsung.android.location",
    "com.sec.android.app.clockpackage",
    "com.sec.android.RilServiceModeApp",
    "com.google.android.webview",
    "com.google.android.overlay.modules.documentsui",
    "com.google.android.networkstack",
    "com.android.server.telecom",
    "com.google.android.syncadapters.contacts",
    "com.sec.imslogger",
    "com.android.keychain",
    "com.qti.snapdragon.qdcm_ff",
    "com.android.chrome",
    "com.samsung.android.themecenter",
    "com.google.android.packageinstaller",
    "com.google.android.gms",
    "com.google.android.gsf",
    "com.google.android.tts",
    "android.autoinstalls.config.samsung",
    "com.android.wifi.resources",
    "com.samsung.android.container",
    "com.android.calllogbackup",
    "com.google.android.partnersetup",
    "com.android.cameraextensions",
    "com.android.localtransport",
    "com.google.android.overlay.gmsconfig.gsa",
    "com.samsung.android.biometrics.app.setting",
    "com.google.android.nearby.halfsheet",
    "com.sec.spp.push",
    "com.android.carrierdefaultapp",
    "com.android.theme.font.notoserifsource",
    "com.sec.android.app.myfiles",
    "com.android.proxyhandler",
    "com.google.android.safetycenter.resources",
    "com.android.internal.display.cutout.emulation.waterfall",
    "com.samsung.android.allshare.service.fileshare",
    "com.sec.android.mimage.photoretouching",
    "com.sec.android.app.launcher",
    "com.google.android.connectivity.resources",
    "com.google.android.overlay.modules.permissioncontroller.forframework",
    "com.google.android.feedback",
    "com.google.android.printservice.recommendation",
    "com.google.android.syncadapters.calendar",
    "com.android.managedprovisioning",
    "com.google.android.documentsui",
    "com.samsung.android.ConnectivityUxOverlay",
    "com.android.dreams.phototable",
    "com.google.mainline.telemetry",
    "com.samsung.safetyinformation",
    "com.samsung.android.dialer",
    "com.samsung.android.dqagent",
    "io.appium.uiautomator2.server.test",
    "com.samsung.android.game.gos",
    "com.samsung.android.forest",
    "com.android.providers.partnerbookmarks",
    "com.android.wallpaper.livepicker",
    "com.samsung.android.beaconmanager",
    "com.samsung.internal.systemui.navbar.gestural_no_hint",
    "com.sec.enterprise.mdm.services.simpin",
    "com.samsung.android.ConnectivityOverlay",
    "com.samsung.android.stickercenter",
    "com.facebook.system",
    "com.samsung.android.providers.media",
    "com.sec.android.soagent",
    "com.sec.android.app.quicktool",
    "com.samsung.android.fmm",
    "com.samsung.android.gru",
    "com.samsung.android.mdm",
    "com.samsung.android.mtp",
    "com.samsung.android.uds",
    "com.sec.unifiedwfc",
    "com.sec.phone",
    "com.samsung.android.app.updatecenter",
    "com.samsung.android.honeyboard",
    "com.google.android.networkstack.permissionconfig",
    "com.android.storagemanager",
    "com.samsung.android.scloud",
    "com.samsung.android.app.soundpicker",
    "com.samsung.android.app.sharelive",
    "com.sec.app.RilErrorNotifier",
    "com.android.bookmarkprovider",
    "com.android.settings",
    "com.qualcomm.qti.cne",
    "com.qualcomm.qti.smq",
    "com.samsung.app.newtrim",
    "com.samsung.android.lool",
    "com.sec.android.app.bluetoothtest",
    "com.sec.android.sdhms",
    "com.samsung.android.sm.policy",
    "com.sec.android.emergencylauncher",
    "com.samsung.android.localeoverlaymanager",
    "com.google.android.projection.gearhead",
    "com.google.android.apps.turbo",
    "com.samsung.android.bluelightfilter",
    "com.samsung.android.a01.d01.wallpapermulti",
    "com.samsung.android.callbgprovider",
    "com.android.cts.ctsshim",
    "com.samsung.android.app.watchmanagerstub",
    "com.google.android.overlay.modules.modulemetadata.forframework",
    "com.sec.mhs.smarttethering",
    "com.samsung.android.networkdiagnostic",
    "com.samsung.android.shortcutbackupservice",
    "com.android.vpndialogs",
    "com.samsung.android.networkstack.tethering.overlay",
    "com.samsung.android.providers.contacts",
    "com.android.phone",
    "com.android.shell",
    "com.android.wallpaperbackup",
    "com.android.providers.blockednumber",
    "com.samsung.android.app.omcagent",
    "com.hiya.star",
    "com.google.android.overlay.modules.cellbroadcastservice",
    "com.android.providers.userdictionary",
    "com.sec.enterprise.knox.cloudmdm.smdms",
    "com.google.android.apps.carrier.carrierwifi",
    "com.wssyncmldm",
    "com.android.hotspot2.osulogin",
    "com.samsung.ims.smk",
    "com.google.android.gms.location.history",
    "com.android.internal.systemui.navbar.gestural",
    "com.dti.samsung",
    "com.android.location.fused",
    "com.samsung.android.app.appsedge",
    "com.sec.epdg",
    "com.android.systemui",
    "com.sec.android.app.personalization",
    "com.android.bluetoothmidiservice",
    "com.facebook.appmanager",
    "com.samsung.android.app.clockpack",
    "com.samsung.aasaservice",
    "com.android.traceur",
    "com.google.android.cellbroadcastreceiver",
    "com.qualcomm.qti.qms.service.trustzoneaccess",
    "com.samsung.android.providers.factory",
    "com.sec.android.provider.emergencymode",
    "android.auto_generated_rro_product__",
    "com.samsung.android.cidmanager",
    "com.sec.android.app.camera",
    "com.android.bluetooth",
    "com.samsung.android.app.clipboardedge",
    "com.qualcomm.timeservice",
    "com.samsung.sec.android.application.csc",
    "com.samsung.android.sdm.config",
    "com.samsung.android.app.dressroom",
    "com.android.internal.systemui.navbar.gestural_narrow_back",
    "com.google.android.photopicker",
    "com.samsung.android.video",
    "android.auto_generated_rro_vendor__",
    "com.google.android.apps.restore"
]

def listar_apps():
    comando = "adb shell pm list packages"
    resultado = subprocess.run(comando.split(), capture_output=True)
    output = resultado.stdout.decode('utf-8').strip()

    lista_de_apps = [linha.replace("package:", "") for linha in output.splitlines()]
    print("Lista de apps instalados:")
    for app in lista_de_apps:
        print(app)
    return lista_de_apps

def apagar_app(app):
    if app in apps_manter:
        print(f"[MANTER] {app}")
    else:
        comando = f"adb shell pm uninstall --user 0 {app}"
        resultado = subprocess.run(comando.split(), capture_output=True)
        print(f"[REMOVER] {app}: {resultado.stdout.decode('utf-8').strip()}")



def main():
	otimizar_app()
'''    todos_os_apps = listar_apps()
    print("\n--- INICIANDO LIMPEZA ---")
    for app in todos_os_apps:
        apagar_app(app)'''

if __name__ == "__main__":
    main()